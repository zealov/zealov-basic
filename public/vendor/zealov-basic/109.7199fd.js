"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[109],{8109:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var a=r(6438),o=r(5108);const i={layout:"default",data:function(){return{error:{},captchaImg:"",activeTab:"accountLogin",loginForm:{name:"",password:"",code:"",captchaKey:""},rules:{name:[{required:!0,message:"账号不能为空",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"}]},totalTime:45,canClick:!1,loading:!1,jaccountAllow:"",can_register:!1}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){this.getCaptcha()},methods:{getCaptcha:function(){var e=this;(0,a.xx)({}).then((function(t){e.captchaImg=t.data.img,e.loginForm.captchaKey=t.data.key}))},userLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.handleLogin()}))},handleLogin:function(){var e=this;this.loading=!0,this.error={},o.log(this.loginForm),this.$store.dispatch("user/login",this.loginForm).then((function(t){e.$router.push({path:e.redirect||"/admin/admin/index1",query:e.otherQuery}),e.loading=!1})).catch((function(t){e.error=t.data,e.loading=!1}))},checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,r){return"redirect"!==r&&(t[r]=e[r]),t}),{})}}};const n=(0,r(1900).Z)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-page"},[r("el-scrollbar",[r("div",{staticClass:"login"},[r("div",{staticClass:"login-top"},[r("div",{staticClass:"logo-box"},[e._v("\n                    后台管理系统\n                ")])]),e._v(" "),r("div",{staticClass:"login-container bg-login"},[r("el-row",{attrs:{gutter:30}},[r("el-col",{staticClass:"left-col",attrs:{xs:24,sm:24,md:12}},[r("div",{staticClass:"login-left"},[r("div",{staticClass:"img"},[r("img",{attrs:{src:"/images/img_login.png",alt:""}})])])]),e._v(" "),r("el-col",{attrs:{xs:24,sm:24,md:12}},[r("div",{staticClass:"login-wrapper"},[r("div",{staticClass:"account-login"},[r("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("el-tab-pane",{attrs:{label:"账号密码登录",name:"accountLogin"}},[r("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules}},[r("el-form-item",{attrs:{prop:"name",error:e.error.name?e.error.name[0]:""}},[r("el-input",{attrs:{type:"text",placeholder:"账户"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.userLogin.apply(null,arguments)}},model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name",t)},expression:"loginForm.name"}},[r("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),r("el-form-item",{attrs:{prop:"password",error:e.error.password?e.error.password[0]:""}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.userLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[r("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),r("el-form-item",{staticClass:"captcha-item",attrs:{prop:"code",error:e.error.code?e.error.code[0]:""}},[r("el-input",{attrs:{type:"text",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.userLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[r("i",{staticClass:"el-input__icon el-icon-chat-dot-round",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),r("img",{attrs:{src:e.captchaImg,alt:"图片验证码"},on:{click:e.getCaptcha}})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"5px"}}),e._v(" "),r("el-form-item",[r("el-button",{attrs:{loading:e.loading,type:"primary",plain:""},on:{click:e.userLogin}},[e._v("\n                                                    立即登录\n                                                ")])],1)],1)],1)],1)],1)])])],1)],1),e._v(" "),r("div",{staticClass:"login-footer"},[e._v("\n                支持的浏览器有：IE版本9以上，Chrome,Safari,Firefox，国内浏览器请使用极速模式。 技术支持：waigaoqiao_top\n            ")])])])],1)}),[],!1,null,null,null).exports}}]);