"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[563],{6563:(a,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s(4319);function n(a,t){return(0,i.Z)({url:"/appStore/"+a,method:"post",data:t})}var o=s(5108);const e={data:function(){return{modules:[],activeName:"appstore",commandDialogShow:!1,commandDialogFinish:!0,commandDialogTitle:"",commandDialogMsgs:[],commandDialogRunElapse:0}},mounted:function(){var a=this;this.doLoad(),setInterval((function(){a.commandDialogRunElapse=parseInt(((new Date).getTime()-a.commandDialogRunStart)/1e3)}),1e3)},methods:{handleClick:function(a,t){o.log(a,t)},doInstall:function(){var a="EditorImageCatchConfig",t="Blog简约主题",s="1.2.2",i=!1;this.doCommand("install",{module:a,version:s,isLocal:i},null,"安装模块 ".concat(t,"（").concat(a,"） V").concat(s))},doCommand:function(a,t,s,i){var e=this;i=i||null,null===(s=s||null)&&(this.commandDialogMsgs=[],this.commandDialogShow=!0,this.commandDialogFinish=!1),i&&(this.commandDialogTitle=i,this.commandDialogMsgs.push('<i class="el-icon-minus"></i> '+i)),this.commandDialogRunStart=(new Date).getTime(),this.commandDialogRunElapse=0,n(a,{token:this.storeApiToken,step:s,data:JSON.stringify(t)}).then((function(a){if(o.log(a,"res"),Array.isArray(a.data.msg)?e.commandDialogMsgs=e.commandDialogMsgs.concat(a.data.msg):e.commandDialogMsgs.push(a.data.msg),a.data.finish)return e.commandDialogFinish=!0,void e.doLoad();setTimeout((function(){e.doCommand(a.data.command,a.data.data,a.data.step)}),1e3)})).catch((function(a){return o.log(a),e.commandDialogMsgs.push('<i class="iconfont icon-close ub-text-danger"></i> <span class="ub-text-danger">'+a.msg+"</span>"),e.commandDialogFinish=!0,!0}))},doLoad:function(){var a=this;n("all",{}).then((function(t){a.modules=t.data.modules,o.log(t,"res")})).catch((function(a){o.log(a)}))}}};const l=(0,s(1900).Z)(e,(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"content_container",staticStyle:{margin:"5px"}},[s("div",{staticClass:"tabs"},[s("el-tabs",{on:{"tab-click":a.handleClick},model:{value:a.activeName,callback:function(t){a.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"appstore",label:"模块市场"}}),a._v(" "),s("el-tab-pane",{attrs:{name:"installed",label:"已安装"}}),a._v(" "),s("el-tab-pane",{attrs:{name:"enabled",label:"已启用"}}),a._v(" "),s("el-tab-pane",{attrs:{name:"disabled",label:"已禁用"}})],1)],1),a._v(" "),s("div",{staticClass:"app_store_black"},[s("el-row",{attrs:{gutter:20}},a._l(a.modules,(function(t,i){return s("el-col",{key:t.id,attrs:{span:7}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[a._v(a._s(t.title)+"111")]),a._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return a.doInstall()}}},[a._v("安装")])],1),a._v(" "),s("el-row",{attrs:{gutter:5}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"card_item_img"},[s("img",{staticClass:"image",attrs:{src:t.cover}})])]),a._v(" "),s("el-col",{attrs:{span:18}},[s("div",[s("div",[s("span",{staticClass:"red p-5"},[a._v(a._s(t.priceSuper?"￥"+t.priceSuper:"免费"))])]),a._v(" "),s("div",{staticClass:"desc d6 p-5"},[a._v(a._s(t.description))]),a._v(" "),s("div",{staticClass:"desc d6 p-5"},[a._v("版本：V"+a._s(t.latestVersion))])])])],1),a._v(" "),s("el-divider"),a._v(" "),s("div",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:"",size:"mini"}},[a._v("其他版本")])],1)],1)],1)])})),1)],1),a._v(" "),s("el-dialog",{attrs:{visible:a.commandDialogShow,"show-close":a.commandDialogFinish,"close-on-press-escape":!1,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){a.commandDialogShow=t}}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"ub-text-bold ub-text-primary"},[s("i",{staticClass:"el-icon-sort"}),a._v("\n                "+a._s(a.commandDialogTitle)+"\n            ")])]),a._v(" "),s("div",{staticClass:"dialog-block"},[a._l(a.commandDialogMsgs,(function(t,i){return s("div",{domProps:{innerHTML:a._s(t)}})})),a._v(" "),a.commandDialogFinish?s("div",[s("i",{staticClass:"el-icon-circle-check"}),a._v("\n                操作已运行完成\n            ")]):s("div",[s("i",{staticClass:"el-icon-loading"}),a._v("\n                当前操作已运行 "+a._s(a.commandDialogRunElapse)+" s ...\n            ")])],2),a._v(" "),a.commandDialogFinish?s("div",{staticClass:"dialog_footer"},[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){a.commandDialogShow=!1}}},[a._v("关闭")])],1):a._e()])],1)}),[],!1,null,null,null).exports}}]);