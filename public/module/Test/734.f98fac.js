"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[734],{3634:(t,e,r)=>{r.d(e,{Kz:()=>o,x4:()=>i,z2:()=>n,xx:()=>s,Vx:()=>l});var a=r(5814);function o(t){return(0,a.Z)({url:"/userList",method:"get",params:t})}function i(t){return(0,a.Z)({url:"/login",method:"post",data:t})}function n(t){return(0,a.Z)({url:"/register",method:"post",data:t})}function s(t){return(0,a.Z)({url:"/captcha",method:"post",data:t})}function l(t,e){return(0,a.Z)({url:"/userList/"+t,method:"put",data:e})}},734:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});var a=r(3634),o=r(5108);const i={layout:"default",data:function(){return{error:{},captchaImg:"",activeTab:"accountLogin",isCodeLogin:!1,loginForm:{name:"",password:"",code:"",captchaKey:""},rules:{name:[{required:!0,message:"账号不能为空",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"}]},totalTime:45,canClick:!1,loading:!1,jaccountAllow:"",can_register:!1}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},created:function(){this.getCaptcha()},methods:{getCaptcha:function(){var t=this;(0,a.xx)({}).then((function(e){t.captchaImg=e.data.img,t.loginForm.captchaKey=e.data.key}))},userLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return!1;t.handleLogin()}))},handleLogin:function(){var t=this;this.loading=!0,this.error={},(0,a.x4)(this.loginForm).then((function(e){t.$store.dispatch("auth/saveToken",{token:e.data.access_token}),t.$router.push({path:t.redirect||"/admin/home",query:t.otherQuery}),t.loading=!1})).catch((function(e){o.log(e),t.error=e.data,t.loading=!1}))},checkCapslock:function(t){var e=t.key;this.capsTooltip=e&&1===e.length&&e>="A"&&e<="Z"},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,r){return"redirect"!==r&&(e[r]=t[r]),e}),{})}}};const n=(0,r(1900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-page"},[r("el-scrollbar",[r("div",{staticClass:"login"},[r("div",{staticClass:"login-top"},[r("div",{staticClass:"logo-box"},[r("img",{attrs:{src:"",alt:""}}),t._v("医者仁心管理系统\n        ")])]),t._v(" "),r("div",{staticClass:"login-container bg-login"},[r("el-row",{attrs:{gutter:30}},[r("el-col",{staticClass:"left-col",attrs:{xs:24,sm:24,md:12}},[r("div",{staticClass:"login-left"},[r("div",{staticClass:"img"},[r("img",{attrs:{src:"/images/img_login.png",alt:""}})])])]),t._v(" "),r("el-col",{attrs:{xs:24,sm:24,md:12}},[r("div",{staticClass:"login-wrapper"},[r("div",{staticClass:"account-login"},[r("div",{staticClass:"change-code",on:{click:function(e){t.isCodeLogin=!0}}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"扫码登录",placement:"left"}})],1),t._v(" "),r("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[r("el-tab-pane",{attrs:{label:"账号密码登录",name:"accountLogin"}},[r("el-form",{ref:"loginForm",attrs:{model:t.loginForm,"status-icon":"",rules:t.rules}},[r("el-form-item",{attrs:{prop:"name",error:t.error.name?t.error.name[0]:""}},[r("el-input",{attrs:{type:"text",placeholder:"手机号"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.userLogin.apply(null,arguments)}},model:{value:t.loginForm.name,callback:function(e){t.$set(t.loginForm,"name",e)},expression:"loginForm.name"}},[r("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{prop:"password",error:t.error.password?t.error.password[0]:""}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.userLogin.apply(null,arguments)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[r("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),r("el-form-item",{staticClass:"captcha-item",attrs:{prop:"code",error:t.error.code?t.error.code[0]:""}},[r("el-input",{attrs:{type:"text",placeholder:"请输入验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.userLogin.apply(null,arguments)}},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}},[r("i",{staticClass:"el-input__icon el-icon-chat-dot-round",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),r("img",{attrs:{src:t.captchaImg,alt:"图片验证码"},on:{click:t.getCaptcha}})],1),t._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"5px"}}),t._v(" "),r("el-form-item",[r("el-button",{attrs:{loading:t.loading,type:"primary",plain:""},on:{click:t.userLogin}},[t._v("\n                          立即登录\n                        ")]),t._v(" "),r("div",{staticClass:"tip-text"},[t._v("\n                          还没有账号？\n                          "),r("router-link",{attrs:{to:"/admin/register"}},[t._v("\n                            立即注册\n                          ")])],1)],1)],1)],1)],1)],1)])])],1)],1),t._v(" "),r("div",{staticClass:"login-footer"},[t._v("\n        支持的浏览器有：IE版本9以上，Chrome,Safari,Firefox，国内浏览器请使用极速模式。 技术支持：waigaoqiao_top\n      ")])])])],1)}),[],!1,null,null,null).exports}}]);