"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[239],{7040:(t,e,a)=>{a.d(e,{K:()=>l,V:()=>s});var i=a(5814);function l(t){return(0,i.Z)({url:"/form/index",method:"get",params:t})}function s(t,e){return(0,i.Z)({url:"/form/"+t,method:"put",data:e})}},3634:(t,e,a)=>{a.d(e,{Kz:()=>l,x4:()=>s,z2:()=>n,xx:()=>r,Vx:()=>o});var i=a(5814);function l(t){return(0,i.Z)({url:"/userList",method:"get",params:t})}function s(t){return(0,i.Z)({url:"/login",method:"post",data:t})}function n(t){return(0,i.Z)({url:"/register",method:"post",data:t})}function r(t){return(0,i.Z)({url:"/captcha",method:"post",data:t})}function o(t,e){return(0,i.Z)({url:"/userList/"+t,method:"put",data:e})}},7717:(t,e,a)=>{a.d(e,{Z:()=>n});var i=a(7040),l=a(5108);const s={data:function(){return{form:{id:"",name:"",age:"",injection_metering:"",is_contraception:"",status:"",reason:"",visit_at:"",file_path:"",created_at:""},dialog:!1,total:0,offset:1,limit:10,total_pages:5,tableLoading:!0,tableData:[],app_url:"",file_path_list:[]}},props:{drawer:{type:Boolean,default:!1},userId:{type:Number}},created:function(){l.log(12323),this.getList()},methods:{handleSizeChange:function(t){this.limit=t,this.getList()},handleCurrentChange:function(t){this.offset=t,this.getList()},dialogReview:function(t){this.form.id=t.id,this.form.name=t.name,this.form.age=t.age,this.form.injection_metering=t.injection_metering,this.form.is_contraception=t.is_contraception,this.form.status=t.status,this.form.reason=t.reason,this.form.visit_at=t.visit_at,this.form.created_at=t.created_at,this.form.file_path=t.app_url+t.file_path,this.file_path_list.push(t.app_url+t.file_path),this.dialog=!0},getList:function(){var t=this;this.tableLoading=!0;var e={offset:this.offset,limit:this.limit,order:"descending",user_id:this.userId};l.log(e),(0,i.K)(e).then((function(e){t.tableData=e.data.list,t.total=e.data.total,t.tableLoading=!1})).catch((function(e){t.tableLoading=!1}))}},computed:{subTaskDrawer_:{get:function(){return this.drawer},set:function(t){this.$emit("changeDrawer",t)}}}};const n=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-drawer",{staticClass:"drawer_tc",attrs:{visible:t.subTaskDrawer_,size:"90%",direction:"btt"},on:{"update:visible":function(e){t.subTaskDrawer_=e}}},[a("div",{staticClass:"content_container"},[a("el-scrollbar",[a("div",{staticClass:"container"},[a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"injection_metering",align:"center",label:"注射计量（ml）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_contraception",align:"center",label:"是否为人工流产后避孕"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"审核状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("div",[a("el-tag",[t._v("待审核")])],1):2==e.row.status?a("div",[a("el-tag",{attrs:{type:"success"}},[t._v("\n                        通过\n                      ")])],1):3==e.row.status?a("div",[a("el-tag",{attrs:{type:"danger"}},[t._v("\n                        驳回\n                      ")])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"visit_at",align:"center",label:"就诊时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",align:"center",label:"提交时间"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-view"},on:{click:function(a){return t.dialogReview(e.row)}}},[t._v("\n                        查看\n                      ")])],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.offset,"pager-count":t.total_pages,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])],1)]),t._v(" "),a("el-drawer",{ref:"drawer",attrs:{title:"",visible:t.dialog,direction:"rtl","custom-class":"custom-drawer"},on:{"update:visible":function(e){t.dialog=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-descriptions",{staticClass:"margin-top",attrs:{title:"处方签详情",column:2,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),t._v("\n              姓名\n            ")]),t._v("\n            "+t._s(t.form.name)+"\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-view"}),t._v("\n              年龄\n            ")]),t._v("\n            "+t._s(t.form.age)+"\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-coffee"}),t._v("\n              注释计量\n            ")]),t._v("\n            "+t._s(t.form.injection_metering)+"ml\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-tickets"}),t._v("\n              是否为人工流产后避孕：\n            ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.form.is_contraception))])],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              就诊时间\n            ")]),t._v("\n            "+t._s(t.form.visit_at)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              提交时间\n            ")]),t._v("\n            "+t._s(t.form.created_at)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              处方签\n            ")]),t._v(" "),a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{width:"200px",height:"auto"},attrs:{src:t.form.file_path,"preview-src-list":t.file_path_list}})],1)],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              审核状态\n            ")]),t._v(" "),1==t.form.status?a("div",[a("el-tag",{attrs:{size:"small"}},[t._v("待审核")])],1):2==t.form.status?a("div",{attrs:{if:""}},[a("el-tag",{attrs:{size:"small",type:"success"}},[t._v("通过")])],1):3==t.form.status?a("div",{attrs:{if:""}},[a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("驳回")])],1):t._e()],2),t._v(" "),3==t.form.status?a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              驳回原因\n            ")]),t._v("\n           "+t._s(t.form.reason)+"\n          ")],2):t._e()],1)],1)])],1)}),[],!1,null,null,null).exports},2239:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var i=a(3634),l=a(8276),s=a(7717),n=a(4155),r=a(5108);const o={layout:"basic",middleware:["auth"],components:{collectTable:s.Z},data:function(){return{role:"",size:"",filter:{is_vip:"",keyWords:""},total:0,offset:1,limit:15,total_pages:5,tableLoading:!0,tableData:[],dialog:!1,loading:!1,collectDrawer:!1,showCollect:!1,form:{id:"",name:"",phone:"",id_card:"",hospital:"",age:"",bank_name:"",bank_code:"",status:"",review:"",reason:"",created_at:"",id_card_front_path:"",id_card_back_path:""},avatar_img_list:[],formLabelWidth:"100px",timer:null,app_url:"",userId:""}},mounted:function(){this.role=(0,l.c)(),this.app_url=n.env.MIX_VUE_APP_HOST_API,this.getList()},methods:{changeDrawer:function(t){this.showCollect=!1,this.collectDrawer=t},cancelForm:function(){this.loading=!1,this.dialog=!1,clearTimeout(this.timer)},toCollect:function(t){var e=this;this.showCollect=!1,this.$nextTick((function(){e.showCollect=!0,e.userId=t.id,e.collectDrawer=!0}))},submit:function(){var t=this;this.loading||this.$confirm("确定要提交表单吗？").then((function(e){t.loading=!0,t.timer=setTimeout((function(){(0,i.Vx)(t.form.id,t.form).then((function(e){setTimeout((function(){t.loading=!1}),400),t.dialog=!1,t.getList()}))}),2e3)})).catch((function(t){}))},dialogReview:function(t){this.form.id=t.id,this.form.name=t.name,this.form.phone=t.phone,this.form.id_card=t.id_card,this.form.hospital=t.hospital,this.form.age=t.age,this.form.bank_name=t.bank_name,this.form.bank_code=t.bank_code,this.form.status=t.status,this.form.review=t.review,this.form.reason=t.reason,this.form.created_at=t.created_at,this.form.id_card_front_path=this.app_url+t.id_card_front_path,this.form.id_card_back_path=this.app_url+t.id_card_back_path,this.dialog=!0},search:function(){this.filter.is_vip="",this.getList()},getListStatus:function(t){this.filter=this.$options.data().filter,this.filter.is_vip=t,this.getList()},getList:function(){var t=this,e={offset:this.offset,limit:this.limit,order:"descending",keyWords:this.filter.keyWords,is_vip:this.filter.is_vip};r.log(1),(0,i.Kz)(e).then((function(e){t.tableData=e.data.list,t.total=e.data.total,t.tableLoading=!1})).catch((function(e){t.tableLoading=!1}))},handleSizeChange:function(t){this.limit=t,this.getList()},handleCurrentChange:function(t){this.offset=t,this.getList()}}};const c=(0,a(1900).Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container"},[a("el-scrollbar",[a("div",{staticClass:"container",staticStyle:{"padding-top":"0"}},[a("div",{staticClass:"header_container is-sticky-top"},[a("div",{staticClass:"left"}),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"filter"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入关键词",clearable:""},model:{value:t.filter.keyWords,callback:function(e){t.$set(t.filter,"keyWords",e)},expression:"filter.keyWords"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"el-icon-search"})])],1)],1)],1)])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-list"},[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",align:"center",label:"ID",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id_card",label:"身份证号",align:"center",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hospital",label:"医院",align:"center",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank_name",label:"开户行",align:"center",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank_code",label:"银行卡号",align:"center",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"处方签数量",prop:"collect_number","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.toCollect(e.row)}}},[t._v(t._s(e.row.collect_number))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"账户状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("div",[a("el-tag",{attrs:{type:"success"}},[t._v("正常")])],1):2==e.row.status?a("div",[a("el-tag",{attrs:{type:"danger"}},[t._v("\n                  禁用\n                ")])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"账户状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.review?a("div",[a("el-tag",[t._v("待审核")])],1):2==e.row.review?a("div",[a("el-tag",{attrs:{type:"success"}},[t._v("\n                  通过\n                ")])],1):3==e.row.review?a("div",[a("el-tag",{attrs:{type:"danger"}},[t._v("\n                  驳回\n                ")])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",align:"center",label:"注册日期"}}),t._v(" "),t.role.includes("manager")?a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){return t.dialogReview(e.row)}}},[t._v("\n                  审核\n                ")])],1)]}}],null,!1,3740814382)}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.offset,"pager-count":t.total_pages,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("el-drawer",{ref:"drawer",attrs:{title:"详情",visible:t.dialog,direction:"rtl","custom-class":"custom-drawer"},on:{"update:visible":function(e){t.dialog=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-descriptions",{staticClass:"margin-top",attrs:{title:"账户详情",column:2,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),t._v("\n              姓名\n            ")]),t._v("\n            "+t._s(t.form.name)+"\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-mobile-phone"}),t._v("\n              年龄\n            ")]),t._v("\n            "+t._s(t.form.age)+"\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n              手机号\n            ")]),t._v("\n            "+t._s(t.form.phone)+"\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              医院\n            ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.form.hospital))])],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-s-custom"}),t._v("\n              身份证号\n            ")]),t._v("\n            "+t._s(t.form.id_card)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              银行卡号\n            ")]),t._v("\n\n            "+t._s(t.form.bank_code)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              开户行\n            ")]),t._v("\n            "+t._s(t.form.bank_name)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              注册日期\n            ")]),t._v("\n            "+t._s(t.form.created_at)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              身份证正面照\n            ")]),t._v(" "),a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{width:"200px",height:"auto"},attrs:{src:t.form.id_card_front_path,"preview-src-list":[t.form.id_card_front_path]}})],1)],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              身份证反面照\n            ")]),t._v(" "),a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{width:"200px",height:"auto"},attrs:{src:t.form.id_card_back_path,"preview-src-list":[t.form.id_card_back_path]}})],1)],2)],1),t._v(" "),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"账户状态","label-width":t.formLabelWidth}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:1}},[t._v("\n                正常\n              ")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("\n                禁用\n              ")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"审核状态","label-width":t.formLabelWidth}},[a("el-radio-group",{model:{value:t.form.review,callback:function(e){t.$set(t.form,"review",e)},expression:"form.review"}},[a("el-radio",{attrs:{label:1}},[t._v("\n                待审核\n              ")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("\n                通过\n              ")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("\n                驳回\n              ")])],1)],1),t._v(" "),3==t.form.review?a("el-form-item",{attrs:{label:"驳回原因","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{on:{click:t.cancelForm}},[t._v("\n            取 消\n          ")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("\n            "+t._s(t.loading?"提交中 ...":"提 交")+"\n          ")])],1)],1)]),t._v(" "),t.showCollect?a("collectTable",{attrs:{drawer:t.collectDrawer,userId:t.userId},on:{changeDrawer:t.changeDrawer}}):t._e()],1)],1)}),[],!1,null,null,null).exports}}]);