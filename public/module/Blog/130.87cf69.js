"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[130],{2670:(t,e,l)=>{l.d(e,{dt:()=>i,h:()=>o,bM:()=>n});var a=l(4319);function i(t){return(0,a.Z)({url:"/blog/chunk/type",method:"get",params:t})}function o(t){return(0,a.Z)({url:"/blog/chunk",method:"post",data:t})}function n(t){return(0,a.Z)({url:"/blog/chunk/relationship",method:"post",data:t})}},7643:(t,e,l)=>{l.d(e,{Kz:()=>i,h:()=>o,$Z:()=>n,Vx:()=>s});var a=l(4319);function i(t){return(0,a.Z)({url:"/blog/file",method:"get",params:t})}function o(t){return(0,a.Z)({url:"/blog/file",method:"post",data:t})}function n(t){return(0,a.Z)({url:"/blog/file/"+t,method:"get"})}function s(t,e){return(0,a.Z)({url:"/blog/file/"+t,method:"put",data:e})}},1728:(t,e,l)=>{l.d(e,{Kz:()=>i,$6:()=>o,h:()=>n,Vx:()=>s,ob:()=>r,$Z:()=>c});var a=l(4319);function i(t){return(0,a.Z)({url:"/blog/page",method:"get",params:t})}function o(t){return(0,a.Z)({url:"/blog/page/all",method:"get",params:t})}function n(t){return(0,a.Z)({url:"/blog/page",method:"post",data:t})}function s(t,e){return(0,a.Z)({url:"/blog/page/"+t,method:"put",data:e})}function r(t){return(0,a.Z)({url:"/blog/page/"+t,method:"delete"})}function c(t){return(0,a.Z)({url:"/blog/page/"+t,method:"get"})}},6526:(t,e,l)=>{l.d(e,{n:()=>i});var a=l(4319);function i(t){return(0,a.Z)({url:"/blog/relationship/entity",method:"get",params:t})}},130:(t,e,l)=>{l.r(e),l.d(e,{default:()=>c});l(1728);var a=l(7643),i=l(2670),o=l(6526),n=l(1203),s=l(5108);const r={props:{id:{type:Number,default:1}},data:function(){return{listLoading:!1,tableData:[],multipleSelection:[],SelectFileDialog:!1,pageOptions:[],tableList:[],offset:1,total:0,limit:10,total_pages:5}},mounted:function(){s.log(this.id),this.getFileList(),this.getEntityList()},methods:{toFormatSize:function(t){return(0,n.BU)(t)},complete:function(t){return(0,n.UO)()+t},selectable:function(t){return!t.status},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.offset=t,this.getFileList()},handleCurrentChange:function(t){this.offset=t,this.getFileList()},getFileList:function(){var t=this,e={offset:this.offset,limit:this.limit,order:"descending"};(0,a.Kz)(e).then((function(e){var l=e.data;t.tableData=l.data}))},createFileRelationship:function(){var t=this;s.log(this.multipleSelection);var e=[];this.multipleSelection.forEach((function(t){e.push(t.id)}));var l={chunk_id:this.id,relationship_type:"files",relationship_id:e.join(",")};(0,i.bM)(l).then((function(e){t.$message({message:e.message,type:"success"}),t.SelectFileDialog=!1,t.getEntityList()}))},getEntityList:function(){var t=this,e={limit:this.per_page,offset:this.offset,subject_type:"chunks",subject_id:this.id};(0,o.n)(e).then((function(e){var l=e.data;t.tableList=l.data,t.total=l.total,s.log(e)}))}}};const c=(0,l(1900).Z)(r,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"content_container no-bg"},[l("el-scrollbar",[l("div",{staticClass:"container",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[l("div",{staticClass:"header_container is-sticky-top"},[l("div",{staticClass:"left"},[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.SelectFileDialog=!0}}},[l("i",{staticClass:"el-icon-s-operation"}),t._v("选择文件")])],1),t._v(" "),l("div",{staticClass:"right"})]),t._v(" "),l("div",{staticClass:"table-list"},[l("el-table",{attrs:{data:t.tableList}},[l("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,width:"100",align:"center",label:"ID"}}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:"缩略图",prop:"path",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.path?l("img",{staticClass:"thumbImg",attrs:{src:t.row.path}}):l("img",{staticClass:"thumbImg",attrs:{src:"images/demo.jpg"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"30%",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-link",{attrs:{href:t.complete(e.row.path),target:"_blank",type:"primary"}},[t._v("\n                            "+t._s(e.row.name)+"\n                        ")])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"大小",prop:"size","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.toFormatSize(e.row.size))+"\n                        ")]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"created_at","show-overflow-tooltip":!0,"min-width":"90",sortable:"",align:"center",label:"创建时间"}}),t._v(" "),l("el-table-column",{attrs:{prop:"label","show-overflow-tooltip":!0,"min-width":"90",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.published?l("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"success",size:"small"}},[t._v("已发布")]):l("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"info",size:"small"}},[t._v("未发布")])]}}])})],1)],1)])]),t._v(" "),l("el-dialog",{attrs:{visible:t.SelectFileDialog,width:"1200px","custom-class":"dialog_tc","close-on-click-modal":!1},on:{"update:visible":function(e){t.SelectFileDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[l("span",{staticClass:"dialog-footer"},[l("el-button",{on:{click:function(e){t.SelectFileDialog=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createFileRelationship()}}},[t._v("确 定")])],1)]},proxy:!0}])},[l("div",{staticClass:"table-list"},[l("div",{staticStyle:{height:"500px"}},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{data:t.tableData,"element-loading-text":"Loading",fit:"","highlight-current-row":"","row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},"max-height":"500px"},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.selectable}}),t._v(" "),l("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,width:"100",align:"center",label:"ID"}}),t._v(" "),l("el-table-column",{attrs:{align:"center",label:"缩略图",prop:"path",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.path?l("img",{staticClass:"thumbImg",attrs:{src:t.row.path}}):l("img",{staticClass:"thumbImg",attrs:{src:"images/demo.jpg"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"30%",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-link",{attrs:{href:t.complete(e.row.path),target:"_blank",type:"primary"}},[t._v("\n                            "+t._s(e.row.name)+"\n                        ")])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"大小",prop:"size","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.toFormatSize(e.row.size))+"\n                        ")]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"created_at","show-overflow-tooltip":!0,"min-width":"90",sortable:"",align:"center",label:"创建时间"}}),t._v(" "),l("el-table-column",{attrs:{prop:"label","show-overflow-tooltip":!0,"min-width":"90",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.published?l("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"success",size:"small"}},[t._v("已发布")]):l("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"info",size:"small"}},[t._v("未发布")])]}}])}),t._v(" "),l("div",{staticClass:"empty-wrap",attrs:{slot:"empty"},slot:"empty"},[l("div",{staticClass:"empty-panel"},[l("div",{staticClass:"img-box"},[l("img",{attrs:{src:"/images/empty.png",alt:""}})]),t._v(" "),l("div",{staticClass:"info"},[t._v("暂无内容~")])])])],1)],1),t._v(" "),l("div",{staticClass:"footer_container is-sticky-bottom"},[l("el-pagination",{attrs:{"current-page":t.offset,"pager-count":t.total_pages,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])],1)}),[],!1,null,null,null).exports}}]);