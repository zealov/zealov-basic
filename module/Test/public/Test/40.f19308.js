"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40],{1040:(t,e,a)=>{a.r(e),a.d(e,{default:()=>s});var i=a(5814);const l={layout:"basic",middleware:"auth",data:function(){return{filter:{status:"",keyWords:""},total:0,offset:1,limit:15,total_pages:5,tableLoading:!0,tableData:[],dialog:!1,loading:!1,destroyLoading:!1,form:{id:"",name:"",status:"",reason:""},statusOptions:[{value:"0",label:"禁用"},{value:"1",label:"启用"}],formLabelWidth:"100px",timer:null,destroyTimer:null}},mounted:function(){this.getList()},methods:{cancelForm:function(){this.loading=!1,this.dialog=!1,clearTimeout(this.timer)},submit:function(){var t=this;this.loading||this.$confirm("确定要提交表单吗？").then((function(e){t.loading=!0,t.timer=setTimeout((function(){var e,a;(e=t.form.id,a=t.form,(0,i.Z)({url:"/admin/"+e,method:"put",data:a})).then((function(e){setTimeout((function(){t.loading=!1}),400),t.dialog=!1,t.getList()}))}),1e3)})).catch((function(t){}))},destroy:function(){var t=this;this.destroyLoading||this.$confirm("确定要提交表单吗？").then((function(e){t.destroyLoading=!0,t.destroyTimer=setTimeout((function(){var e;(e=t.form.id,t.form,(0,i.Z)({url:"/admin/"+e,method:"delete"})).then((function(e){setTimeout((function(){t.destroyLoading=!1}),400),t.dialog=!1,t.getList()}))}),1e3)})).catch((function(t){}))},dialogReview:function(t){this.form.id=t.id,this.form.name=t.name,this.form.nick_name=t.nick_name,this.form.status=t.status,this.form.reason=t.reason,this.dialog=!0},getListStatus:function(t){this.filter=this.$options.data().filter,this.filter.status=t,this.getList()},search:function(){this.getList()},getList:function(){var t,e=this,a={offset:this.offset,limit:this.limit,order:"descending",keyWords:this.filter.keyWords,category_id:this.filter.category_id,status:this.filter.status};(t=a,(0,i.Z)({url:"/admin",method:"get",params:t})).then((function(t){e.tableData=t.data.list,e.total=t.data.total,e.tableLoading=!1})).catch((function(t){e.tableLoading=!1}))},handleSizeChange:function(t){this.limit=t,this.getList()},handleCurrentChange:function(t){this.offset=t,this.getList()}}};const s=(0,a(1900).Z)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container"},[a("el-scrollbar",[a("div",{staticClass:"container",staticStyle:{"padding-top":"0"}},[a("div",{staticClass:"header_container is-sticky-top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.getListStatus("0")}}},[a("i",{staticClass:"el-icon-search"}),t._v(" 查询待审核\n          ")])],1),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"filter"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入关键词",clearable:""},model:{value:t.filter.keyWords,callback:function(e){t.$set(t.filter,"keyWords",e)},expression:"filter.keyWords"}})],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择类型",clearable:""},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"el-icon-search"}),t._v(" 搜索\n                ")])],1)],1)],1)])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-list"},[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",align:"center",label:"ID",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"账户",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nick_name",align:"center",label:"昵称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("div",[a("el-tag",[t._v("禁用")])],1):1==e.row.status?a("div",[a("el-tag",{attrs:{type:"success"}},[t._v("\n                  启用\n                ")])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",align:"center",label:"注册日期"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-check"},on:{click:function(a){return t.dialogReview(e.row)}}},[t._v("\n                  审核\n                ")])],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.offset,"pager-count":t.total_pages,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("el-drawer",{ref:"drawer",attrs:{title:"详情",visible:t.dialog,direction:"rtl","custom-class":"custom-drawer"},on:{"update:visible":function(e){t.dialog=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"账户","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"昵称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.form.nick_name,callback:function(e){t.$set(t.form,"nick_name",e)},expression:"form.nick_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"审核状态","label-width":t.formLabelWidth,required:""}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:1}},[t._v("\n                启用\n              ")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("\n                禁用\n              ")])],1)],1),t._v(" "),0==t.form.status?a("el-form-item",{attrs:{label:"驳回原因","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{on:{click:t.cancelForm}},[t._v("\n            取 消\n          ")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("\n            "+t._s(t.loading?"提交中 ...":"提 交")+"\n          ")])],1)],1)])],1)],1)}),[],!1,null,null,null).exports}}]);