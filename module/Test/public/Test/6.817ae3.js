"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6],{6242:(t,e,a)=>{a.d(e,{Kz:()=>i,Ue:()=>s,FZ:()=>n,Vx:()=>r});var l=a(5814);function i(t){return(0,l.Z)({url:"/delegate",method:"get",params:t})}function s(t){return(0,l.Z)({url:"/delegate",method:"post",data:t})}function n(t){return(0,l.Z)({url:"/delegate/tree",method:"get",params:t})}function r(t,e){return(0,l.Z)({url:"/delegate/"+t,method:"put",data:e})}},7040:(t,e,a)=>{a.d(e,{K:()=>i,V:()=>s});var l=a(5814);function i(t){return(0,l.Z)({url:"/form/index",method:"get",params:t})}function s(t,e){return(0,l.Z)({url:"/form/"+t,method:"put",data:e})}},3432:(t,e,a)=>{a.d(e,{B:()=>i,X:()=>s});var l=a(5814);function i(t){return(0,l.Z)({url:"/head_member",method:"get",params:t})}function s(t){return(0,l.Z)({url:"/head_member/level",method:"get",params:t})}},3634:(t,e,a)=>{a.d(e,{Kz:()=>i,x4:()=>s,z2:()=>n,xx:()=>r,Vx:()=>o});var l=a(5814);function i(t){return(0,l.Z)({url:"/userList",method:"get",params:t})}function s(t){return(0,l.Z)({url:"/login",method:"post",data:t})}function n(t){return(0,l.Z)({url:"/register",method:"post",data:t})}function r(t){return(0,l.Z)({url:"/captcha",method:"post",data:t})}function o(t,e){return(0,l.Z)({url:"/userList/"+t,method:"put",data:e})}},7717:(t,e,a)=>{a.d(e,{Z:()=>n});var l=a(7040),i=a(5108);const s={data:function(){return{form:{id:"",name:"",age:"",injection_metering:"",is_contraception:"",status:"",reason:"",visit_at:"",file_path:"",created_at:""},dialog:!1,total:0,offset:1,limit:10,total_pages:5,tableLoading:!0,tableData:[],app_url:"",file_path_list:[]}},props:{drawer:{type:Boolean,default:!1},userId:{type:Number}},created:function(){i.log(12323),this.getList()},methods:{handleSizeChange:function(t){this.limit=t,this.getList()},handleCurrentChange:function(t){this.offset=t,this.getList()},dialogReview:function(t){this.form.id=t.id,this.form.name=t.name,this.form.age=t.age,this.form.injection_metering=t.injection_metering,this.form.is_contraception=t.is_contraception,this.form.status=t.status,this.form.reason=t.reason,this.form.visit_at=t.visit_at,this.form.created_at=t.created_at,this.form.file_path=t.app_url+t.file_path,this.file_path_list.push(t.app_url+t.file_path),this.dialog=!0},getList:function(){var t=this;this.tableLoading=!0;var e={offset:this.offset,limit:this.limit,order:"descending",user_id:this.userId};i.log(e),(0,l.K)(e).then((function(e){t.tableData=e.data.list,t.total=e.data.total,t.tableLoading=!1})).catch((function(e){t.tableLoading=!1}))}},computed:{subTaskDrawer_:{get:function(){return this.drawer},set:function(t){this.$emit("changeDrawer",t)}}}};const n=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-drawer",{staticClass:"drawer_tc",attrs:{visible:t.subTaskDrawer_,size:"90%",direction:"btt"},on:{"update:visible":function(e){t.subTaskDrawer_=e}}},[a("div",{staticClass:"content_container"},[a("el-scrollbar",[a("div",{staticClass:"container"},[a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"injection_metering",align:"center",label:"注射计量（ml）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_contraception",align:"center",label:"是否为人工流产后避孕"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"审核状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("div",[a("el-tag",[t._v("待审核")])],1):2==e.row.status?a("div",[a("el-tag",{attrs:{type:"success"}},[t._v("\n                        通过\n                      ")])],1):3==e.row.status?a("div",[a("el-tag",{attrs:{type:"danger"}},[t._v("\n                        驳回\n                      ")])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"visit_at",align:"center",label:"就诊时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",align:"center",label:"提交时间"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-view"},on:{click:function(a){return t.dialogReview(e.row)}}},[t._v("\n                        查看\n                      ")])],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.offset,"pager-count":t.total_pages,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])],1)]),t._v(" "),a("el-drawer",{ref:"drawer",attrs:{title:"",visible:t.dialog,direction:"rtl","custom-class":"custom-drawer"},on:{"update:visible":function(e){t.dialog=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-descriptions",{staticClass:"margin-top",attrs:{title:"处方签详情",column:2,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),t._v("\n              姓名\n            ")]),t._v("\n            "+t._s(t.form.name)+"\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-view"}),t._v("\n              年龄\n            ")]),t._v("\n            "+t._s(t.form.age)+"\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-coffee"}),t._v("\n              注释计量\n            ")]),t._v("\n            "+t._s(t.form.injection_metering)+"ml\n          ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-tickets"}),t._v("\n              是否为人工流产后避孕：\n            ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.form.is_contraception))])],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              就诊时间\n            ")]),t._v("\n            "+t._s(t.form.visit_at)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              提交时间\n            ")]),t._v("\n            "+t._s(t.form.created_at)+"\n          ")],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              处方签\n            ")]),t._v(" "),a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{width:"200px",height:"auto"},attrs:{src:t.form.file_path,"preview-src-list":t.file_path_list}})],1)],2),t._v(" "),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              审核状态\n            ")]),t._v(" "),1==t.form.status?a("div",[a("el-tag",{attrs:{size:"small"}},[t._v("待审核")])],1):2==t.form.status?a("div",{attrs:{if:""}},[a("el-tag",{attrs:{size:"small",type:"success"}},[t._v("通过")])],1):3==t.form.status?a("div",{attrs:{if:""}},[a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("驳回")])],1):t._e()],2),t._v(" "),3==t.form.status?a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n              驳回原因\n            ")]),t._v("\n           "+t._s(t.form.reason)+"\n          ")],2):t._e()],1)],1)])],1)}),[],!1,null,null,null).exports},2006:(t,e,a)=>{a.r(e),a.d(e,{default:()=>p});var l=a(7717),i=a(5814);function s(t){return(0,i.Z)({url:"/area/tree",method:"get",params:t})}var n=a(3432),r=a(6242),o=a(3634),c=a(8276),d=a(629),u=a(5108);const m={computed:(0,d.Se)({user:"auth/user"}),components:{collectTable:l.Z},layout:"basic",middleware:"auth",data:function(){return{role:"",collectDrawer:!1,showCollect:!1,filter:{keyWords:""},loading:!0,total:0,offset:1,limit:10,total_pages:5,tableData:[],treeData:[],headTreeData:[],delegateTreeData:[],tableLoading:!1}},mounted:function(){this.role=(0,c.c)(),"level3_master"==this.role&&this.getDelegateByHead({id:this.user.delegate_id}),"level2_master"==this.role?this.areaList(this.user.delegate_id):this.areaList()},methods:{changeDrawer:function(t){this.showCollect=!1,this.collectDrawer=t},toCollect:function(t){var e=this;this.showCollect=!1,this.$nextTick((function(){e.showCollect=!0,e.userId=t.id,e.collectDrawer=!0}))},getUserByDelegate:function(t){var e=this;this.tableData=[],this.tableLoading=!0;var a={delegate_id:t.id,offset:this.offset,limit:this.limit,order:"descending",keyWords:this.filter.keyWords};(0,o.Kz)(a).then((function(t){e.tableData=t.data.list,e.total=t.data.total,e.tableLoading=!1})).catch((function(t){e.tableLoading=!1}))},getDelegateByHead:function(t){var e=this;this.delegateTreeData=[],this.tableData=[],u.log("aaasdasdas"),(0,r.FZ)({id:t.id}).then((function(t){e.delegateTreeData=t.data.data}))},getUserByArea:function(t){var e=this;this.headTreeData=[],this.delegateTreeData=[],this.tableData=[],(0,n.B)({id:t.value}).then((function(t){e.headTreeData=t.data.data}))},areaList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s({head_member_id:e}).then((function(e){t.treeData=e.data.data}))},search:function(){},handleSizeChange:function(t){this.per_page=t,this.current_page=1},handleCurrentChange:function(t){this.current_page=t}}};const p=(0,a(1900).Z)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container"},[a("div",{staticClass:"container material-box",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[t._m(0),t._v(" "),a("div",{staticClass:"material-content"},[t.role.includes("level1_master")||t.role.includes("level2_master")||t.role.includes("manager")?a("div",{staticClass:"material-left"},[a("div",{staticClass:"material-group"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title"},[t._v("区域")]),t._v(" "),a("el-button",{attrs:{type:"text"}})],1),t._v(" "),a("div",{staticClass:"group-tree"},[a("el-scrollbar",[a("el-tree",{attrs:{data:t.treeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":!0},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var l=e.data;return a("span",{staticClass:"custom-tree-node",on:{click:function(e){return t.getUserByArea(l)}}},[a("i",{staticClass:"el-icon-folder"}),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:l.label,placement:"top-start"}},[a("span",{staticClass:"node-name"},[t._v(t._s(l.label))])]),t._v(" "),a("span",{staticClass:"num"},[t._v(t._s(null!=l.children?"（"+l.children.length+"）":""))])],1)}}],null,!1,2262440825)})],1)],1)])]):t._e(),t._v(" "),t.role.includes("level1_master")||t.role.includes("level2_master")||t.role.includes("manager")?a("div",{staticClass:"material-left"},[a("div",{staticClass:"material-group"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title"},[t._v("负责人")]),t._v(" "),a("el-button",{attrs:{type:"text"}})],1),t._v(" "),a("div",{staticClass:"group-tree"},[a("el-scrollbar",[a("el-tree",{attrs:{data:t.headTreeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":!0},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var l=e.data;return a("span",{staticClass:"custom-tree-node",on:{click:function(e){return t.getDelegateByHead(l)}}},[a("i",{staticClass:"el-icon-user"}),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:l.head_name+(null!=l.station?"（"+l.station+"）":""),placement:"top-start"}},[a("span",{staticClass:"node-name"},[t._v(t._s(l.head_name))])]),t._v(" "),a("span",{staticClass:"num"},[t._v(t._s(null!=l.station?"（"+l.station+"）":""))])],1)}}],null,!1,2100865749)})],1)],1)])]):t._e(),t._v(" "),t.role.includes("level1_master")||t.role.includes("level2_master")||t.role.includes("level3_master")||t.role.includes("manager")?a("div",{staticClass:"material-left"},[a("div",{staticClass:"material-group"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title"},[t._v("医药代表")]),t._v(" "),a("el-button",{attrs:{type:"text"}})],1),t._v(" "),a("div",{staticClass:"group-tree"},[a("el-scrollbar",[a("el-tree",{attrs:{data:t.delegateTreeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":!0},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var l=e.data;return a("span",{staticClass:"custom-tree-node",on:{click:function(e){return t.getUserByDelegate(l)}}},[a("i",{staticClass:"el-icon-user"}),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:l.delegate_name,placement:"top-start"}},[a("span",{staticClass:"node-name"},[t._v(t._s(l.delegate_name))])])],1)}}],null,!1,691760544)})],1)],1)])]):t._e(),t._v(" "),a("div",{staticClass:"material-right"},[a("div",{staticClass:"material_list"},[a("el-scrollbar",[a("div",{staticClass:"scrollbar-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{data:t.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"医生姓名",prop:"name","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"年龄",prop:"age","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"处方签数量",prop:"collect_number","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.toCollect(e.row)}}},[t._v(t._s(e.row.collect_number))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"医院",prop:"hospital","min-width":"90"}})],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.offset,"pager-count":t.total_pages,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])],1)])])]),t._v(" "),t.showCollect?a("collectTable",{attrs:{drawer:t.collectDrawer,userId:t.userId},on:{changeDrawer:t.changeDrawer}}):t._e()],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container is-sticky-top"},[a("div",{staticClass:"left"}),t._v(" "),a("div",{staticClass:"right"})])}],!1,null,null,null).exports}}]);