"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536,130,989,246],{8663:(t,e,a)=>{a.d(e,{W3:()=>o,Ue:()=>n,mJ:()=>l,$Z:()=>s,Vx:()=>r,ob:()=>c});var i=a(4319);function o(t){return(0,i.Z)({url:"/blog/category",method:"get",params:t})}function n(t){return(0,i.Z)({url:"/blog/category",method:"post",data:t})}function l(t){return(0,i.Z)({url:"/blog/category/updateSort",method:"post",data:t})}function s(t){return(0,i.Z)({url:"/blog/category/"+t,method:"get"})}function r(t,e){return(0,i.Z)({url:"/blog/category/"+t,method:"put",data:e})}function c(t){return(0,i.Z)({url:"/blog/category/"+t,method:"delete"})}},2670:(t,e,a)=>{a.d(e,{dt:()=>o,h:()=>n,bM:()=>l});var i=a(4319);function o(t){return(0,i.Z)({url:"/blog/chunk/type",method:"get",params:t})}function n(t){return(0,i.Z)({url:"/blog/chunk",method:"post",data:t})}function l(t){return(0,i.Z)({url:"/blog/chunk/relationship",method:"post",data:t})}},7643:(t,e,a)=>{a.d(e,{Kz:()=>o,h:()=>n,$Z:()=>l,Vx:()=>s});var i=a(4319);function o(t){return(0,i.Z)({url:"/blog/file",method:"get",params:t})}function n(t){return(0,i.Z)({url:"/blog/file",method:"post",data:t})}function l(t){return(0,i.Z)({url:"/blog/file/"+t,method:"get"})}function s(t,e){return(0,i.Z)({url:"/blog/file/"+t,method:"put",data:e})}},2371:(t,e,a)=>{a.d(e,{Kz:()=>o,h:()=>n,mJ:()=>l,$Z:()=>s,Vx:()=>r,ob:()=>c});var i=a(4319);function o(t){return(0,i.Z)({url:"/blog/navigation",method:"get",params:t})}function n(t){return(0,i.Z)({url:"/blog/navigation",method:"post",data:t})}function l(t){return(0,i.Z)({url:"/blog/navigation/updateSort",method:"post",data:t})}function s(t){return(0,i.Z)({url:"/blog/navigation/"+t,method:"get"})}function r(t,e){return(0,i.Z)({url:"/blog/navigation/"+t,method:"put",data:e})}function c(t){return(0,i.Z)({url:"/blog/navigation/"+t,method:"delete"})}},1728:(t,e,a)=>{a.d(e,{Kz:()=>o,$6:()=>n,h:()=>l,Vx:()=>s,ob:()=>r,$Z:()=>c});var i=a(4319);function o(t){return(0,i.Z)({url:"/blog/page",method:"get",params:t})}function n(t){return(0,i.Z)({url:"/blog/page/all",method:"get",params:t})}function l(t){return(0,i.Z)({url:"/blog/page",method:"post",data:t})}function s(t,e){return(0,i.Z)({url:"/blog/page/"+t,method:"put",data:e})}function r(t){return(0,i.Z)({url:"/blog/page/"+t,method:"delete"})}function c(t){return(0,i.Z)({url:"/blog/page/"+t,method:"get"})}},6526:(t,e,a)=>{a.d(e,{n:()=>o});var i=a(4319);function o(t){return(0,i.Z)({url:"/blog/relationship/entity",method:"get",params:t})}},130:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});a(1728);var i=a(7643),o=a(2670),n=a(6526),l=a(1203),s=a(5108);const r={props:{id:{type:Number,default:1}},data:function(){return{listLoading:!1,tableData:[],multipleSelection:[],SelectFileDialog:!1,pageOptions:[],tableList:[],offset:1,total:0,limit:10,total_pages:5}},mounted:function(){s.log(this.id),this.getFileList(),this.getEntityList()},methods:{toFormatSize:function(t){return(0,l.BU)(t)},complete:function(t){return(0,l.UO)()+t},selectable:function(t){return!t.status},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.offset=t,this.getFileList()},handleCurrentChange:function(t){this.offset=t,this.getFileList()},getFileList:function(){var t=this,e={offset:this.offset,limit:this.limit,order:"descending"};(0,i.Kz)(e).then((function(e){var a=e.data;t.tableData=a.data}))},createFileRelationship:function(){var t=this;s.log(this.multipleSelection);var e=[];this.multipleSelection.forEach((function(t){e.push(t.id)}));var a={chunk_id:this.id,relationship_type:"files",relationship_id:e.join(",")};(0,o.bM)(a).then((function(e){t.$message({message:e.message,type:"success"}),t.SelectFileDialog=!1,t.getEntityList()}))},getEntityList:function(){var t=this,e={limit:this.per_page,offset:this.offset,subject_type:"chunks",subject_id:this.id};(0,n.n)(e).then((function(e){var a=e.data;t.tableList=a.data,t.total=a.total,s.log(e)}))}}};const c=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container no-bg"},[a("el-scrollbar",[a("div",{staticClass:"container",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticClass:"header_container is-sticky-top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.SelectFileDialog=!0}}},[a("i",{staticClass:"el-icon-s-operation"}),t._v("选择文件")])],1),t._v(" "),a("div",{staticClass:"right"})]),t._v(" "),a("div",{staticClass:"table-list"},[a("el-table",{attrs:{data:t.tableList}},[a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,width:"100",align:"center",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"缩略图",prop:"path",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.path?a("img",{staticClass:"thumbImg",attrs:{src:t.row.path}}):a("img",{staticClass:"thumbImg",attrs:{src:"images/demo.jpg"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"30%",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{href:t.complete(e.row.path),target:"_blank",type:"primary"}},[t._v("\n                            "+t._s(e.row.name)+"\n                        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"大小",prop:"size","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.toFormatSize(e.row.size))+"\n                        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at","show-overflow-tooltip":!0,"min-width":"90",sortable:"",align:"center",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"label","show-overflow-tooltip":!0,"min-width":"90",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.published?a("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"success",size:"small"}},[t._v("已发布")]):a("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"info",size:"small"}},[t._v("未发布")])]}}])})],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{visible:t.SelectFileDialog,width:"1200px","custom-class":"dialog_tc","close-on-click-modal":!1},on:{"update:visible":function(e){t.SelectFileDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.SelectFileDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createFileRelationship()}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("div",{staticClass:"table-list"},[a("div",{staticStyle:{height:"500px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{data:t.tableData,"element-loading-text":"Loading",fit:"","highlight-current-row":"","row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},"max-height":"500px"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.selectable}}),t._v(" "),a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,width:"100",align:"center",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"缩略图",prop:"path",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.path?a("img",{staticClass:"thumbImg",attrs:{src:t.row.path}}):a("img",{staticClass:"thumbImg",attrs:{src:"images/demo.jpg"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"30%",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{href:t.complete(e.row.path),target:"_blank",type:"primary"}},[t._v("\n                            "+t._s(e.row.name)+"\n                        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"大小",prop:"size","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.toFormatSize(e.row.size))+"\n                        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at","show-overflow-tooltip":!0,"min-width":"90",sortable:"",align:"center",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"label","show-overflow-tooltip":!0,"min-width":"90",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.published?a("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"success",size:"small"}},[t._v("已发布")]):a("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"info",size:"small"}},[t._v("未发布")])]}}])}),t._v(" "),a("div",{staticClass:"empty-wrap",attrs:{slot:"empty"},slot:"empty"},[a("div",{staticClass:"empty-panel"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:"/images/empty.png",alt:""}})]),t._v(" "),a("div",{staticClass:"info"},[t._v("暂无内容~")])])])],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.offset,"pager-count":t.total_pages,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])],1)}),[],!1,null,null,null).exports},6989:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});var i=a(1728),o=a(2670),n=a(6526),l=a(5108);const s={props:{id:{type:Number,default:1}},data:function(){return{SelectPageDialog:!1,createPageForm:{page_id:""},pageOptions:[],tableList:[],current_page:1,total:0,per_page:10,total_pages:5}},mounted:function(){l.log(this.id),this.getPageAll(),this.getEntityList()},methods:{handleSizeChange:function(t){this.current_page=t,this.getEntityList()},handleCurrentChange:function(t){this.current_page=t,this.getEntityList()},getPageAll:function(){var t=this;(0,i.$6)().then((function(e){var a=e.data;t.pageOptions=a.data}))},createPageRelationship:function(){var t=this,e={chunk_id:this.id,relationship_type:"pages",relationship_id:this.createPageForm.page_id};(0,o.bM)(e).then((function(e){t.$message({message:e.message,type:"success"}),t.SelectPageDialog=!1,t.getEntityList()}))},getEntityList:function(){var t=this,e={limit:this.per_page,offset:this.current_page,subject_type:"chunks",subject_id:this.id};(0,n.n)(e).then((function(e){var a=e.data;t.tableList=a.data,t.total=a.total,l.log(e)}))}}};const r=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container no-bg"},[a("el-scrollbar",[a("div",{staticClass:"container",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticClass:"header_container is-sticky-top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.SelectPageDialog=!0}}},[a("i",{staticClass:"el-icon-s-operation"}),t._v("选择页面")])],1),t._v(" "),a("div",{staticClass:"right"})]),t._v(" "),a("div",{staticClass:"table-list"},[a("el-table",{attrs:{data:t.tableList}},[a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,width:"55",align:"center",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"40%",label:"页面标题"}})],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.current_page,"pager-count":t.total_pages,"page-size":t.per_page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])]),t._v(" "),a("el-dialog",{attrs:{visible:t.SelectPageDialog,width:"750px","custom-class":"dialog_tc","close-on-click-modal":!1},on:{"update:visible":function(e){t.SelectPageDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.SelectPageDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createPageRelationship()}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{attrs:{model:t.createPageForm}},[a("el-form-item",{attrs:{required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.createPageForm.page_id,callback:function(e){t.$set(t.createPageForm,"page_id",e)},expression:"createPageForm.page_id"}},t._l(t.pageOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},5246:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});var i=a(8663),o=a(2670),n=a(6526),l=a(5108);const s={props:{id:{type:Number,default:1}},data:function(){return{CreateCategoryDialog:!1,createCategoryForm:{categories:""},categoryOptions:[],tableList:[],current_page:1,total:0,per_page:10,total_pages:5}},mounted:function(){l.log(this.id),this.getCategoryList(),this.getEntityList()},methods:{handleSizeChange:function(t){this.current_page=t,this.getEntityList()},handleCurrentChange:function(t){this.current_page=t,this.getEntityList()},getCategoryList:function(){var t=this;(0,i.W3)().then((function(e){var a=e.data;t.categoryOptions=a.category}))},createCategoryRelationship:function(){var t=this,e={chunk_id:this.id,relationship_type:"categories",relationship_id:this.createCategoryForm.categories.slice(-1)[0]};(0,o.bM)(e).then((function(e){t.$message({message:e.message,type:"success"}),t.CreateCategoryDialog=!1,t.getEntityList()}))},getEntityList:function(){var t=this,e={limit:this.per_page,offset:this.current_page,subject_type:"chunks",subject_id:this.id};(0,n.n)(e).then((function(e){var a=e.data;t.tableList=a.data,t.total=a.total,l.log(e)}))}}};const r=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container no-bg"},[a("el-scrollbar",[a("div",{staticClass:"container",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticClass:"header_container is-sticky-top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.CreateCategoryDialog=!0}}},[a("i",{staticClass:"el-icon-s-operation"}),t._v("按分类添加")])],1),t._v(" "),a("div",{staticClass:"right"})]),t._v(" "),a("div",{staticClass:"table-list"},[a("el-table",{attrs:{data:t.tableList}},[a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,width:"55",align:"center",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"40%",label:"文章标题"}})],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.current_page,"pager-count":t.total_pages,"page-size":t.per_page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])]),t._v(" "),a("el-dialog",{attrs:{visible:t.CreateCategoryDialog,width:"560px","custom-class":"dialog_tc","close-on-click-modal":!1},on:{"update:visible":function(e){t.CreateCategoryDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.CreateCategoryDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createCategoryRelationship()}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{attrs:{model:t.createCategoryForm}},[a("el-form-item",{attrs:{required:""}},[a("el-cascader",{attrs:{options:t.categoryOptions,clearable:"",filterable:"",props:{expandTrigger:"click",label:"name",checkStrictly:!0,value:"id"},placeholder:"请选择分类"},model:{value:t.createCategoryForm.categories,callback:function(e){t.$set(t.createCategoryForm,"categories",e)},expression:"createCategoryForm.categories"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports},1536:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var i=a(2371),o=a(2670),n=a(5246),l=a(6989),s=a(130);const r={data:function(){return{navigation_id:"",activeTab:"basic",addDialog:!1,chunks:[],typeList:[],createChunkForm:{name:"",type:"",subject_type:"navigations",subject_id:""}}},mounted:function(){this.navigation_id=this.createChunkForm.subject_id=this.$route.params.id,this.getChunk(this.navigation_id),this.getTypeList()},components:{Post:n.default,Page:l.default,File:s.default},methods:{getChunk:function(t){var e=this;this.updateError={},(0,i.$Z)(t).then((function(t){var a=t.data;e.chunks=a.chunk}))},getTypeList:function(){var t=this;(0,o.dt)().then((function(e){var a=e.data;t.typeList=a.data}))},createChunk:function(){var t=this;(0,o.h)(this.createChunkForm).then((function(e){t.$message({message:e.message,type:"success"}),t.addDialog=!1,t.getChunk(t.navigation_id)}))}}};const c=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container"},[a("el-tabs",{staticClass:"tabs fixed-top",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}}),t._v(" "),t._l(t.chunks,(function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.name,name:e.id+e.name}},["posts"==e.type?[t.activeTab==e.id+e.name?a("Post",{attrs:{id:e.id}}):t._e()]:t._e(),t._v(" "),"pages"==e.type?[t.activeTab==e.id+e.name?a("Page",{attrs:{id:e.id}}):t._e()]:t._e(),t._v(" "),"files"==e.type?[t.activeTab==e.id+e.name?a("File",{attrs:{id:e.id}}):t._e()]:t._e()],2)}))],2),t._v(" "),a("el-button",{staticClass:"topic-add-button",attrs:{size:"small",type:"text"},on:{click:function(e){t.addDialog=!0}}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.addDialog,width:"560px","custom-class":"dialog_tc","close-on-click-modal":!1},on:{"update:visible":function(e){t.addDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createChunk()}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{attrs:{model:t.createChunkForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",required:""}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.createChunkForm.name,callback:function(e){t.$set(t.createChunkForm,"name",e)},expression:"createChunkForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{model:{value:t.createChunkForm.type,callback:function(e){t.$set(t.createChunkForm,"type",e)},expression:"createChunkForm.type"}},t._l(t.typeList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);