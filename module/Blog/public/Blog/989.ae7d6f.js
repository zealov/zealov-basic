"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[989],{2670:(t,e,a)=>{a.d(e,{dt:()=>i,h:()=>o,bM:()=>l});var n=a(4319);function i(t){return(0,n.Z)({url:"/blog/chunk/type",method:"get",params:t})}function o(t){return(0,n.Z)({url:"/blog/chunk",method:"post",data:t})}function l(t){return(0,n.Z)({url:"/blog/chunk/relationship",method:"post",data:t})}},1728:(t,e,a)=>{a.d(e,{Kz:()=>i,$6:()=>o,h:()=>l,Vx:()=>r,ob:()=>s,$Z:()=>c});var n=a(4319);function i(t){return(0,n.Z)({url:"/blog/page",method:"get",params:t})}function o(t){return(0,n.Z)({url:"/blog/page/all",method:"get",params:t})}function l(t){return(0,n.Z)({url:"/blog/page",method:"post",data:t})}function r(t,e){return(0,n.Z)({url:"/blog/page/"+t,method:"put",data:e})}function s(t){return(0,n.Z)({url:"/blog/page/"+t,method:"delete"})}function c(t){return(0,n.Z)({url:"/blog/page/"+t,method:"get"})}},6526:(t,e,a)=>{a.d(e,{n:()=>i});var n=a(4319);function i(t){return(0,n.Z)({url:"/blog/relationship/entity",method:"get",params:t})}},6989:(t,e,a)=>{a.r(e),a.d(e,{default:()=>s});var n=a(1728),i=a(2670),o=a(6526),l=a(5108);const r={props:{id:{type:Number,default:1}},data:function(){return{SelectPageDialog:!1,createPageForm:{page_id:""},pageOptions:[],tableList:[],current_page:1,total:0,per_page:10,total_pages:5}},mounted:function(){l.log(this.id),this.getPageAll(),this.getEntityList()},methods:{handleSizeChange:function(t){this.current_page=t,this.getEntityList()},handleCurrentChange:function(t){this.current_page=t,this.getEntityList()},getPageAll:function(){var t=this;(0,n.$6)().then((function(e){var a=e.data;t.pageOptions=a.data}))},createPageRelationship:function(){var t=this,e={chunk_id:this.id,relationship_type:"pages",relationship_id:this.createPageForm.page_id};(0,i.bM)(e).then((function(e){t.$message({message:e.message,type:"success"}),t.SelectPageDialog=!1,t.getEntityList()}))},getEntityList:function(){var t=this,e={limit:this.per_page,offset:this.current_page,subject_type:"chunks",subject_id:this.id};(0,o.n)(e).then((function(e){var a=e.data;t.tableList=a.data,t.total=a.total,l.log(e)}))}}};const s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_container no-bg"},[a("el-scrollbar",[a("div",{staticClass:"container",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticClass:"header_container is-sticky-top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.SelectPageDialog=!0}}},[a("i",{staticClass:"el-icon-s-operation"}),t._v("选择页面")])],1),t._v(" "),a("div",{staticClass:"right"})]),t._v(" "),a("div",{staticClass:"table-list"},[a("el-table",{attrs:{data:t.tableList}},[a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,width:"55",align:"center",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"40%",label:"页面标题"}})],1)],1),t._v(" "),a("div",{staticClass:"footer_container is-sticky-bottom"},[a("el-pagination",{attrs:{"current-page":t.current_page,"pager-count":t.total_pages,"page-size":t.per_page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])]),t._v(" "),a("el-dialog",{attrs:{visible:t.SelectPageDialog,width:"750px","custom-class":"dialog_tc","close-on-click-modal":!1},on:{"update:visible":function(e){t.SelectPageDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.SelectPageDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createPageRelationship()}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{attrs:{model:t.createPageForm}},[a("el-form-item",{attrs:{required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.createPageForm.page_id,callback:function(e){t.$set(t.createPageForm,"page_id",e)},expression:"createPageForm.page_id"}},t._l(t.pageOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);